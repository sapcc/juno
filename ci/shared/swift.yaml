platform: linux

image_resource:
  type: registry-image
  source:
    repository: keppel.eu-de-1.cloud.sap/ccloud/juno-v3-swift
    tag: "latest"

inputs:
  - name: data_dir # where the data is located that you want to upload

params:
  ACTION: # upload or download
  CONTAINER: # the container to upload
  ASSET_NAME: # the assetname that you want to upload
  ASSET_PATH: # the assetpath from where to upload
  OS_USERNAME: # username for the project to access the object storage
  OS_PASSWORD: # password for the project to access the object storage
  OS_AUTH_URL: # auth url for the region to access the object storage
  OS_USER_DOMAIN_NAME: # domain name for the project to access
  OS_PROJECT_DOMAIN_NAME: # domain name for the project
  OS_PROJECT_NAME: # project name for the project that you want to access

run:
  path: /bin/sh
  args:
    - -c
    - |
      set -e cd
      cd ./data_dir
      DATA_DIR=$(pwd)
      cd /juno
      ./ci/scripts/asset_storage.sh --asset-name $ASSET_NAME --container juno-assets --asset-path $ASSET_PATH --action $ACTION --root-path $DATA_DIR --container $CONTAINER
